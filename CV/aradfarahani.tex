name: Compile LaTeX CV

on:
  schedule:
    - cron: '0 0 * * *'  # Runs every day at midnight UTC
  push:
    paths:
      - 'CV/*.tex'  # Triggers when a LaTeX file is changed

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
    - name: Checkout repository
      uses: actions/checkout@v3  # Upgraded to v3 for latest features

    - name: Set up TeX Live
      run: |
        sudo apt-get install -y texlive-latex-base texlive-fonts-recommended texlive-fonts-extra texlive-xetex texlive-latex-extra
        # texlive-bibtex-extra and texlive-science omitted unless needed; uncomment below if required
        # sudo apt-get install -y texlive-bibtex-extra texlive-science

    - name: Compile LaTeX file to PDF
      run: |
        cd CV
        pdflatex -interaction=nonstopmode -output-directory=./ aradfarahani.tex  # Replace with your .tex file name

    - name: Commit PDF
      uses: EndBug/add-and-commit@v9
      with:
        author_name: GitHub Actions
        author_email: actions@github.com
        message: 'Update CV PDF'
        add: 'CV/aradfarahani.pdf'

    - name: Upload PDF to GitHub
      uses: actions/upload-artifact@v4  # Updated to v4
      with:
        name: my-cv
        path: CV/aradfarahani.pdf  # Replace with your compiled PDF name
